# Release Notes - v0.1.0-beta.4

## Overview
This beta release addresses critical issues with the published application and improves the overall release package quality.

## üêõ Bug Fixes

### JSON Serialization Error
- **Issue**: Published application failed to start with "Reflection-based serialization has been disabled" error
- **Root Cause**: `PublishTrimmed=true` flag enabled AOT compilation which disabled reflection-based JSON serialization
- **Fix**: Removed `PublishTrimmed=true` from release workflow to allow proper JSON configuration loading

### Console Color Rendering
- **Issue**: ANSI color codes displayed as raw text in published version instead of rendering colors
- **Root Cause**: Windows console doesn't enable ANSI escape sequence support by default in published applications
- **Fix**: Added Windows API calls to enable virtual terminal processing at application startup
- **Implementation**: Added `GetStdHandle`, `GetConsoleMode`, and `SetConsoleMode` calls in `Program.cs`

### Coverage Generation Failure
- **Issue**: CI/CD coverage checks failed with "null%" coverage values
- **Root Cause**: Debug symbols were globally disabled, breaking coverage tool instrumentation
- **Fix**: Moved debug symbol exclusions to release workflow only, preserving coverage generation for tests

## üì¶ Release Package Improvements

### Documentation Inclusion
- **Added**: README.md now included in release package for better user experience
- **Implementation**: Updated release workflow to copy README.md to publish directory

### Clean Release Artifacts
- **Removed**: PDB debug symbol files from release builds
- **Removed**: XML documentation files from release builds
- **Implementation**: Added `DebugType=none`, `DebugSymbols=false`, and `GenerateDocumentationFile=false` to release workflow

## üîß Technical Changes

### Program.cs
- Added Windows API imports for console mode management
- Added ANSI color support initialization at application startup
- Improved console compatibility for published builds

### Release Workflow (.github/workflows/release.yml)
- Removed `PublishTrimmed=true` flag to fix JSON serialization
- Added debug symbol and documentation exclusions for cleaner releases
- Added README.md copying to release package

### Project Configuration (SharpBridge.csproj)
- Removed global debug symbol exclusions that were breaking coverage
- Moved release-specific settings to workflow level

## üöÄ What's New

### Enhanced User Experience
- **Working console colors** in published version for better visual feedback
- **Complete documentation** included in release package
- **Cleaner release artifacts** without debug clutter

### Improved Development Workflow
- **Fixed coverage generation** for CI/CD pipeline
- **Better release packaging** with proper file inclusion/exclusion
- **Maintained development experience** while optimizing release builds

## üìã Known Issues

- **Platform Limitation**: ANSI color support currently Windows-only (Linux support planned for future releases)
- **Console Dependencies**: Requires Windows console API for color rendering

## üîÆ Future Improvements

- **Cross-platform ANSI support** for Linux and macOS
- **Additional platform builds** (Linux, macOS) in release workflow
- **Enhanced error handling** for console initialization

## üì• Installation

Download the release package and extract to your desired location. The application includes:
- Main executable (`SharpBridge.exe`)
- Configuration files in `configs/` directory
- Deployment scripts in `tools/` directory
- README.md with setup instructions

## üõ†Ô∏è Configuration

The application uses JSON configuration files in the `configs/` directory:
- `ApplicationConfig.json` - Main application settings
- `UserPreferences.json` - User-specific preferences
- `vts_transforms.json` - VTube Studio transformation rules

## üêõ Troubleshooting

If you encounter issues:
1. Ensure Windows console is being used (not redirected output)
2. Check that configuration files are properly formatted JSON
3. Verify firewall settings if using non-localhost connections
4. Review README.md for detailed setup instructions

---

**Release Date**: January 2025  
**Version**: 0.1.0-beta.4  
**Compatibility**: Windows x64 